We could tag each snippet of the chat history with sentiment, on taskness, train of thought score, fragmentation

Let the user change the role, system messages by editing files.  But ultimately let them be edited by the main tool, and then have it know how to update those specific files.  Walking a user thru a git conflict seems a useful scenario to be able to navigate.