
>[!tip] Created: [2024-02-21 Wed 18:20]

>[!question] Targets: 

>[!danger] Depends: 

Seems best if only the changed updates and updated.

Make a base, packed snapshot periodically, that gets stored in s3.

Then keep lightweight low latency copies of only the changed objects which are assembled as layered FS and only as needed, so only when an object is requested is a lower layer requested.

The layers make storage cheap and fast, but there is wasted space and time for more dormant repos, so offloading to s3 saves space and time, but loses latency.

Also makes it very light to do commit watching.

This batching process can just kick off periodically, by using a key with a delivery delay whenever some layers are created, to eventually compress down the layers.

If the layer count gets high, then we should compress early.